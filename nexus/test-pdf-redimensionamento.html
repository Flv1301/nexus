<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Redimensionamento Autom√°tico de PDFs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos similares ao relat√≥rio */
        body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            padding: 20px;
        }
        
        .pdf-test-container {
            border: 2px solid #007bff;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
        }
        
        .pdf-page-container {
            margin: 15px 0;
            text-align: center;
            border: 1px solid #ddd;
            padding: 10px;
        }
        
        .pdf-resize-info {
            font-size: 10px;
            color: #666;
            margin-bottom: 5px;
            font-style: italic;
        }
        
        .pdf-summary-info {
            margin-top: 15px;
            padding: 10px;
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .test-pdf-canvas {
            border: 1px solid #666;
            max-width: 734px; /* Largura m√°xima A4 */
            display: block;
            margin: 0 auto;
        }
        
        @media print {
            .pdf-test-container {
                page-break-inside: avoid;
            }
            .test-pdf-canvas {
                max-width: 734px !important;
                height: auto !important;
                width: auto !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>üîß Teste - Redimensionamento Autom√°tico de PDFs</h2>
        <p class="text-info">
            Este teste simula como PDFs de diferentes tamanhos s√£o redimensionados automaticamente 
            para caber perfeitamente na impress√£o A4.
        </p>

        <!-- Simula√ß√£o de PDF pequeno -->
        <div class="pdf-test-container">
            <h5>üìÑ Teste 1: PDF Pequeno (400x300px)</h5>
            <div class="pdf-page-container">
                <div class="pdf-resize-info">
                    ‚úÖ Documento mant√©m tamanho original - nenhum redimensionamento necess√°rio
                </div>
                <canvas class="test-pdf-canvas" width="400" height="300" 
                        style="background: linear-gradient(45deg, #e3f2fd, #bbdefb);">
                    Simula√ß√£o de PDF pequeno
                </canvas>
                <div style="margin-top: 10px; font-size: 10px; color: #666;">
                    <strong>Dimens√µes:</strong> 400x300px | <strong>Escala:</strong> 100% | <strong>Status:</strong> Original
                </div>
            </div>
            <div class="pdf-summary-info">
                <p style="margin: 0; font-weight: bold;">‚ÑπÔ∏è Resultado:</p>
                <p style="margin: 5px 0 0 0;">
                    ‚Ä¢ PDF pequeno mant√©m tamanho original<br>
                    ‚Ä¢ Cabe perfeitamente dentro dos limites da p√°gina A4<br>
                    ‚Ä¢ Qualidade m√°xima preservada
                </p>
            </div>
        </div>

        <!-- Simula√ß√£o de PDF m√©dio -->
        <div class="pdf-test-container">
            <h5>üìÑ Teste 2: PDF M√©dio (800x600px)</h5>
            <div class="pdf-page-container">
                <div class="pdf-resize-info">
                    üìè Documento redimensionado para 92% para ajustar √† p√°gina A4
                </div>
                <canvas class="test-pdf-canvas" width="734" height="551" 
                        style="background: linear-gradient(45deg, #fff3e0, #ffcc02);">
                    Simula√ß√£o de PDF m√©dio redimensionado
                </canvas>
                <div style="margin-top: 10px; font-size: 10px; color: #666;">
                    <strong>Dimens√µes:</strong> 800x600px ‚Üí 734x551px | <strong>Escala:</strong> 92% | <strong>Status:</strong> Redimensionado
                </div>
            </div>
            <div class="pdf-summary-info">
                <p style="margin: 0; font-weight: bold;">‚ÑπÔ∏è Resultado:</p>
                <p style="margin: 5px 0 0 0;">
                    ‚Ä¢ PDF redimensionado proporcionalmente<br>
                    ‚Ä¢ Cabe perfeitamente na largura da p√°gina A4<br>
                    ‚Ä¢ Qualidade preservada com leve redu√ß√£o
                </p>
            </div>
        </div>

        <!-- Simula√ß√£o de PDF grande -->
        <div class="pdf-test-container">
            <h5>üìÑ Teste 3: PDF Grande (1200x900px)</h5>
            <div class="pdf-page-container">
                <div class="pdf-resize-info">
                    üìè Documento redimensionado para 61% para ajustar √† p√°gina A4
                </div>
                <canvas class="test-pdf-canvas" width="734" height="551" 
                        style="background: linear-gradient(45deg, #fce4ec, #f8bbd9);">
                    Simula√ß√£o de PDF grande redimensionado
                </canvas>
                <div style="margin-top: 10px; font-size: 10px; color: #666;">
                    <strong>Dimens√µes:</strong> 1200x900px ‚Üí 734x551px | <strong>Escala:</strong> 61% | <strong>Status:</strong> Redimensionado
                </div>
            </div>
            <div class="pdf-summary-info">
                <p style="margin: 0; font-weight: bold;">‚ÑπÔ∏è Resultado:</p>
                <p style="margin: 5px 0 0 0;">
                    ‚Ä¢ PDF grande reduzido significativamente<br>
                    ‚Ä¢ Todo o conte√∫do permanece vis√≠vel<br>
                    ‚Ä¢ Nenhuma parte √© cortada na impress√£o
                </p>
            </div>
        </div>

        <!-- Simula√ß√£o de PDF muito grande -->
        <div class="pdf-test-container">
            <h5>üìÑ Teste 4: PDF Muito Grande (2000x1500px)</h5>
            <div class="pdf-page-container">
                <div class="pdf-resize-info">
                    üìè Documento redimensionado para 37% para ajustar √† p√°gina A4
                </div>
                <canvas class="test-pdf-canvas" width="734" height="551" 
                        style="background: linear-gradient(45deg, #e8f5e8, #a5d6a7);">
                    Simula√ß√£o de PDF muito grande redimensionado
                </canvas>
                <div style="margin-top: 10px; font-size: 10px; color: #666;">
                    <strong>Dimens√µes:</strong> 2000x1500px ‚Üí 734x551px | <strong>Escala:</strong> 37% | <strong>Status:</strong> Redimensionado
                </div>
            </div>
            <div class="pdf-summary-info">
                <p style="margin: 0; font-weight: bold;">‚ÑπÔ∏è Resultado:</p>
                <p style="margin: 5px 0 0 0;">
                    ‚Ä¢ PDF muito grande reduzido ao m√°ximo permitido<br>
                    ‚Ä¢ Conte√∫do pode ficar pequeno mas permanece leg√≠vel<br>
                    ‚Ä¢ Alternativa melhor que cortar o documento
                </p>
            </div>
        </div>

        <!-- Resumo do algoritmo -->
        <div class="alert alert-info mt-4">
            <h6>üßÆ Algoritmo de Redimensionamento</h6>
            <code>
                const scaleByWidth = 734 / originalWidth;<br>
                const scaleByHeight = 1063 / originalHeight;<br>
                const optimalScale = Math.min(scaleByWidth, scaleByHeight, 2.0);<br>
                return Math.max(optimalScale, 0.5); // M√≠nimo 50%
            </code>
        </div>

        <!-- Informa√ß√µes t√©cnicas -->
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h6>üìè Especifica√ß√µes A4</h6>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li><strong>Largura total:</strong> 794px (210mm)</li>
                            <li><strong>Altura total:</strong> 1123px (297mm)</li>
                            <li><strong>Margem:</strong> 60px (15mm cada lado)</li>
                            <li><strong>√Årea √∫til:</strong> 734px √ó 1063px</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h6>‚úÖ Benef√≠cios</h6>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li>‚úÖ Nenhum conte√∫do cortado</li>
                            <li>‚úÖ Aproveitamento otimizado da p√°gina</li>
                            <li>‚úÖ Redimensionamento autom√°tico</li>
                            <li>‚úÖ Informa√ß√µes transparentes</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-warning mt-4">
            <strong>üí° Dica:</strong> Na impress√£o real, o sistema PDF.js renderiza os documentos 
            em alta resolu√ß√£o e depois aplica o redimensionamento, garantindo a melhor qualidade poss√≠vel.
        </div>
    </div>

    <script>
        // Simula o desenho nos canvas para demonstra√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            const canvases = document.querySelectorAll('.test-pdf-canvas');
            
            canvases.forEach((canvas, index) => {
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // Desenha texto simulando conte√∫do PDF
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`PDF Simulado ${index + 1}`, width/2, height/2 - 20);
                ctx.fillText(`${width}x${height}px`, width/2, height/2);
                ctx.fillText('Conte√∫do preservado', width/2, height/2 + 20);
                
                // Desenha borda
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 2;
                ctx.strokeRect(0, 0, width, height);
            });
        });
    </script>
</body>
</html> 